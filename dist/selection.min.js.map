{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./src/utils.ts","webpack:///./src/selection.ts"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","eventListener","method","elements","events","fn","elements_","options","arguments","length","undefined","HTMLCollection","NodeList","Array","from","isArray","element","event","assign","capture","slice","on","off","unitify","val","unit","css","el","attr","style","prop","_prop","_val","cssStyleDeclaration","dw","document","defaultView","getComputedStyle","utils_intersects","a","b","bxc","left","width","byc","top","height","right","bottom","selectAll","selector","nodes","sel","push","querySelectorAll","eventPath","evt","path","composedPath","target","parentElement","removeElement","arr","index","indexOf","splice","simplifyEvent","tap","touches","x","clientX","y","clientY","isElement","HTMLElement","nodeType","nodeName","__webpack_exports__","selection_Selection","[object Object]","this","class","startThreshold","disableTouch","singleClick","containers","selectables","startareas","boundaries","selectionAreaContainer","scrollSpeedDivider","validateStart","console","log","selection","eventName","areaElement","originalEvent","selectedElements","changedElements","selectionFilter","selectedStore","createElement","clippingElement","scrollAvailable","scrollSpeed","areaStartX","areaStartY","areaEndX","areaEndY","touchedElements","targetBoundary","targetContainer","added","removed","utils","utils_namespaceObject","version","init","onTapMove","onTapStart","onTapStop","onSingleTap","manualScroll","delayedTapMove","sAC","querySelector","TypeError","appendChild","position","overflow","transform","pointerEvents","enable","type","passive","e","_utils$simplifyEvent","targetBondaryClientRect","getBoundingClientRect","startAreas","evtpath","find","includes","resolveSelectables","tC","Math","round","scrollHeight","scrollWidth","filter","contains","_this$targetBoundary","marginTop","marginLeft","classList","add","preventDefault","dispatchEvent","_utils$simplifyEvent3","abs","_utils$simplifyEvent4","redrawArea","updatedTouchingElements","scrollContainer","scroll","scrollTop","scrollLeft","ceil","requestAnimationFrame","deltaX","deltaY","changedTouches","TouchList","targetTouches","_this$targetContainer","clientHeight","clientWidth","boundaryRect","min","max","noEvent","touched","changed","areaRect","intersects","selectable","dispatchFilterEvent","touchedElement","additional","concat","Error","container","Selection","keepEvent","bindStartEvents","disable","removeChild"],"mappings":"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","file":"selection.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Selection\"] = factory();\n\telse\n\t\troot[\"Selection\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import { Mode, CSSWriteableStyleDeclarationProperties, Subtype, SelectionEventMap } from \"./types\";\n\nfunction eventListener(\n    method: \"addEventListener\" | \"removeEventListener\", \n    elements: EventTarget | EventTarget[], \n    events: (keyof SelectionEventMap)[] | keyof SelectionEventMap, \n    fn: (e:any) => void,\n    options: Object = {}) {\n\n    let elements_: Iterable<Subtype<EventTarget, Function>>\n    // Normalize array\n    if (elements instanceof HTMLCollection || elements instanceof NodeList) {\n        elements_ = Array.from(<HTMLCollection | NodeList>elements);\n    } else if (!Array.isArray(elements)) {\n        elements_ = [elements];\n    } else \n        elements_ = elements\n\n    if (!Array.isArray(events)) events = [events];\n\n    for (const element of elements_) {\n        for (const event of events) {\n            element[method](event, fn, {capture: false, ...options});\n        }\n    }\n\n    return Array.prototype.slice.call(arguments, 1);\n}\n\n/**\n * Add event(s) to element(s).\n * @param elements DOM-Elements\n * @param events Event names\n * @param fn Callback\n * @param options Optional options\n * @return Array passed arguments\n */\nexport const on = eventListener.bind(null, 'addEventListener');\n\n/**\n * Remove event(s) from element(s).\n * @param elements DOM-Elements\n * @param events Event names\n * @param fn Callback\n * @param options Optional options\n * @return Array passed arguments\n */\nexport const off = eventListener.bind(null, 'removeEventListener');\n\nconst unitify = (val: string | number, unit = 'px') => typeof val === 'number' ? val + unit : '' + val;\n\n/**\n * Add css to a DOM-Element or returns the current\n * value of a property.\n *\n * @param el The Element.\n * @param attr The attribute or a object which holds css key-properties.\n * @param val The value for a single attribute.\n * @returns {*}\n */\nexport function css(el: HTMLElement, attr: {[key in CSSWriteableStyleDeclarationProperties]?: string | number } | CSSWriteableStyleDeclarationProperties | null, val?: number | string) {\n\n    // what the heck is this function \n\n    const style = el && el.style;\n    if (!style) return; //undefined\n\n    if (typeof attr === 'object') {\n\n        for (let prop in attr) {\n            let _prop = <CSSWriteableStyleDeclarationProperties>prop\n            let _val = attr[_prop]\n            if(_prop && _val)\n                style[_prop] = unitify(_val);\n        }\n        // undefined\n    } else if (val == null) {\n\n        let cssStyleDeclaration: CSSStyleDeclaration | null\n        const dw = document.defaultView;\n        cssStyleDeclaration = dw && dw.getComputedStyle && dw.getComputedStyle(el, null);\n        \n         \n        // IE6 - deprecated as outdated and unsecure - no need to support\n        // else if (el.currentStyle) {\n        //     val = el.currentStyle;\n        // }\n        if(cssStyleDeclaration)\n        return attr == null ? cssStyleDeclaration : cssStyleDeclaration[attr]; // CSSStyleDeclaration | string | number\n    } else {\n        style[attr] = unitify(val);\n        // undefined\n    }\n}\n\n/**\n * Check if two DOM-Elements intersects each other.\n * @param a BoundingClientRect of the first element.\n * @param b BoundingClientRect of the second element.\n * @param mode Options are center, cover or touch.\n * @returns {boolean} If both elements intersects each other.\n */\nexport function intersects(a: ClientRect | DOMRect, b: ClientRect | DOMRect, mode: Mode = 'touch') {\n\n    if (mode === 'center') {\n        const bxc = b.left + b.width / 2;\n        const byc = b.top + b.height / 2;\n\n        return bxc >= a.left\n            && bxc <= a.right\n            && byc >= a.top\n            && byc <= a.bottom;\n    } else if (mode === 'cover') {\n        return b.left >= a.left\n            && b.top >= a.top\n            && b.right <= a.right\n            && b.bottom <= a.bottom;\n    } else if (mode === 'touch') {\n        return a.right >= b.left\n            && a.left <= b.right\n            && a.bottom >= b.top\n            && a.top <= b.bottom;\n    }\n}\n\n/**\n * Takes a selector (or array of selectors) and returns the matched nodes.\n * @param selector The selector or an Array of selectors.\n * @returns {Array} Array of DOM-Nodes.\n */\nexport function selectAll(selector: string | Array<string>) {\n    if (!Array.isArray(selector)) selector = [selector];\n\n    const nodes: Array<Element> = [];\n    for (const sel of selector) {\n        nodes.push(...document.querySelectorAll(sel));\n    }\n\n    return nodes;\n}\n\n/**\n * Polyfill for safari & firefox for the eventPath event property.\n * @param evt The event object.\n * @return [String] event path.\n */\nexport function eventPath(evt: Event) {\n    let path = /** evt.path  || */ (evt.composedPath && evt.composedPath()); // again ignore M$\n    if (path) return path;\n\n    // polyfill\n    let el = (<Element>evt.target).parentElement\n    if(el && evt.target){\n\n        path = [evt.target, el];\n        while (el = el.parentElement) path.push(el);\n    }\n    \n    path.push(document, window);\n    return path;\n}\n\n/**\n * Removes first instance of element from an Array by reference.\n */\nexport function removeElement(arr: Array<any>, el: Element) {\n    const index = arr.indexOf(el);\n    if (~index) arr.splice(index, 1);\n}\n\n\nexport function simplifyEvent(evt: MouseEvent | TouchEvent) {\n    const tap = ((<TouchEvent>evt).touches && (<TouchEvent>evt).touches[0]) || <MouseEvent>evt;\n    return {\n        tap,\n        x: tap.clientX,   \n        y: tap.clientY,\n        target: <Element>tap.target\n    };\n}\n\n/**\n * Checks if value is likely a DOM element.\n */\nexport function isElement(value: any) {\n    return (\n        typeof HTMLElement === \"object\"\n            ? value instanceof HTMLElement\n            : typeof value === \"object\" && value !== null && value.nodeType === 1 && typeof value.nodeName === \"string\"\n    );\n}","/**\n * Selection, library to realize visual DOM-Selection like on your Desktop.\n *\n * @author  Simon Reinisch - TypeScripted: Samuel Ueberle\n * @license MIT\n */\nimport {Options, Utils, ChangedElements, Subtype, DispatchEventMap, Omit} from './types'\nimport * as utils from './utils'\n\n\n\n\nexport class Selection {\n\n    \n\n    private options: Options = {\n        class: 'selection-area',\n        startThreshold: 10,\n        disableTouch: false,\n        mode: 'touch',\n        singleClick: true,\n        containers: [],\n        selectables: [],\n        startareas: ['html'],\n        boundaries: ['html'],\n        selectionAreaContainer: 'body',\n        scrollSpeedDivider: 10,\n        validateStart(evt) {\n            evt; // MouseEvent or TouchEvent\n            console.log(evt)\n            return true;\n        },\n        onStart(evt) {\n            evt.selection;\n            evt.eventName;\n            evt.areaElement;\n            evt.originalEvent;\n            evt.selectedElements;\n            evt.changedElements;\n        },\n        onSelect(evt) {\n        evt.target; // Clicked element\n        },\n        onMove(evt) {\n        },\n        onStop(evt) {\n        },\n        selectionFilter(evt) {\n            evt.selection; // This selection instance\n            evt.eventName; // The event name\n            evt.element;   // The element which is in the current selection\n            return true\n        }\n    }\n    private selectedStore: any[]\n    = []\n    private areaElement: HTMLDivElement\n    = document.createElement('div')\n    private clippingElement: HTMLDivElement \n    = document.createElement('div')\n    private scrollAvailable: boolean \n    = true\n    private scrollSpeed: {x: number | null, y: number | null} \n    = {x: null, y: null}\n    private selectionAreaContainer: Element | string = 'body'\n    private areaStartX: number = 0\n    private areaStartY: number = 0\n    private areaEndX: number = 0\n    private areaEndY: number = 0\n    private boundaries: Element[] = []\n    private touchedElements: Element[] = []\n    private targetBoundary:  ClientRect | DOMRect | null = null\n    private targetContainer: Element | null = null\n    private selectables: Element[] = []\n    private singleClick: boolean = false\n    private changedElements: ChangedElements = {\n        added: [],\n        removed: []\n    }\n\n    constructor(options?: Options){\n        if(options)\n        Object.assign(this.options, options)\n        console.log(options, this.options)\n        this.init()\n    }\n\n\n    private init() {\n\n\n        this.onTapMove = this.onTapMove.bind(this)\n        this.onTapStart = this.onTapStart.bind(this)\n        this.onTapStop = this.onTapStop.bind(this)\n        this.onSingleTap = this.onSingleTap.bind(this)\n        this.manualScroll = this.manualScroll.bind(this)\n        this.delayedTapMove = this.delayedTapMove.bind(this)\n        \n        \n        // Append area to container\n        if (utils.isElement(this.options.selectionAreaContainer)) {\n            this.selectionAreaContainer = <Element>this.options.selectionAreaContainer;\n        } else {\n            let sAC = document.querySelector(<string>this.options.selectionAreaContainer);\n            if(!sAC) throw TypeError(\"null is not assignable\")\n            else this.selectionAreaContainer = sAC\n        }\n\n        this.clippingElement.appendChild(this.areaElement);\n        this.selectionAreaContainer.appendChild(this.clippingElement);\n\n        // Apply basic styles to the area element\n        utils.css(\n            this.areaElement, \n            {\n                top: 0,\n                left: 0,\n                position: 'fixed'\n            }\n        );\n\n        utils.css(\n            this.clippingElement,\n            {\n                overflow: 'hidden',\n                position: 'fixed',\n                transform: 'translate3d(0, 0, 0)', // https://stackoverflow.com/a/38268846\n                pointerEvents: 'none'\n            }\n        );\n\n        this.enable();\n    }\n\n    private bindStartEvents(type: 'on' | 'off'){\n        utils[type]\n        (document, 'mousedown', this.onTapStart)\n        if(!this.options.disableTouch){\n            utils[type]\n            (document, 'touchstart', this.onTapStart, {passive: false})\n        }\n    }\n    private onTapStart(e: TouchEvent): void{\n        console.log(this)\n        const {x, y, target} = utils.simplifyEvent(e)\n        const targetBondaryClientRect = target.getBoundingClientRect()\n\n        if(!this.options.validateStart(e)){\n            return ;\n        }\n\n        const startAreas = utils.selectAll(this.options.startareas)\n        this.boundaries = utils.selectAll(this.options.boundaries)\n\n        const evtpath = utils.eventPath(e)\n        if(\n            !startAreas.find(el => evtpath.includes(el)) ||\n            !this.boundaries.find(el => evtpath.includes(el))\n        ) return undefined;\n\n        this.areaStartX = x;\n        this.areaStartY = y;\n            console.log(x, y, this.areaStartX, this.areaStartY)\n        this.areaEndX = 0;\n        this.areaEndY = 0;\n\n        this.singleClick = true\n\n        this.resolveSelectables()\n\n        let tC = this.boundaries.find(\n            el => !!utils.intersects(\n                el.getBoundingClientRect(),\n                targetBondaryClientRect\n            )\n        )\n        if(tC === undefined) throw TypeError('targetContainer cannot be undefined')\n        this.targetContainer = tC\n\n        this.targetBoundary = this.targetContainer.getBoundingClientRect()\n        this.touchedElements = []\n        this.changedElements = {\n            added: [],\n            removed: []\n        }\n\n        if(\n            Math.round(\n                this.targetContainer.scrollHeight\n            ) \n            !== Math.round(\n                this.targetBoundary.height\n            ) ||\n            Math.round(\n                this.targetContainer.scrollWidth\n            )\n            !== Math.round(\n                this.targetBoundary.width\n            )\n        ) {\n            this.scrollAvailable = true\n\n            \n            utils.on(window, 'wheel', this.manualScroll)\n            this.selectables = this.selectables.filter(s => this.targetContainer && this.targetContainer.contains(s))\n\n            let {top, left, width, height} = this.targetBoundary\n            utils.css(\n                this.clippingElement, {\n                    \"top\": top, \n                    left, width, height\n                }\n            )\n\n            utils.css(\n                this.areaElement, {\n                    marginTop: -top,\n                    marginLeft: -left\n                }\n            )\n        } else {\n            this.scrollAvailable = false\n\n            utils.css(\n                this.clippingElement,\n                {\n                    top: 0,\n                    left: 0,\n                    width: '100%',\n                    height: '100%'\n                }\n            )\n            utils.css(\n                this.areaElement, {\n                    marginTop: 0,\n                    marginLeft: 0\n                }\n            )\n        }\n\n        this.areaElement.classList.add(this.options.class);\n\n        \n        utils.on(document, 'mousemove', this.delayedTapMove)\n        utils.on(document, 'touchmove', this.delayedTapMove, {\n            passive: false\n        })\n\n        \n        utils.on(document, ['mouseup', 'touchcancel', 'touchend'], this.onTapStop)\n\n        e.preventDefault()\n    }\n    private onSingleTap(e: TouchEvent): void{\n        let {target} = utils.simplifyEvent(e)\n\n        while(this.selectables.includes(target)){\n            if(target.parentElement){\n                target = target.parentElement\n            } else {\n                return undefined;\n            }\n        }\n\n        this.touchedElements.push(target);\n        this.dispatchEvent('onSelect', e, {target})\n    }\n    private delayedTapMove(e: TouchEvent){\n        let {x , y} = utils.simplifyEvent(e)\n\n        if(Math.abs(x + y) - (this.areaStartX + this.areaStartY) >= this.options.startThreshold){\n\n            utils.off(document, ['mousemove', 'touchmove'], this.delayedTapMove);\n            utils.on(document, ['mousemove', 'touchmove'], this.onTapMove);\n            utils.css(\n                this.areaElement,\n                'display',\n                'block'\n            )\n            this.onTapMove(e)\n            this.dispatchEvent('onStart', e)\n            this.singleClick = false\n        }\n    }\n    private onTapMove(e: TouchEvent){\n\n        if(!this.targetContainer) return;\n\n        let {x , y} = utils.simplifyEvent(e)\n        this.areaEndX = x;\n        this.areaEndY = y;\n        \n        if(this.scrollAvailable && (this.scrollSpeed.y !== null || this.scrollSpeed.x !== null)){\n            const scrollContainer = this.targetContainer\n            \n            let scroll = (t: number):void => {\n        \n                if(this.scrollSpeed.y === null && this.scrollSpeed.x === null){\n        \n                    return undefined;\n                }\n        \n                const {scrollTop, scrollLeft} = scrollContainer\n                if(this.scrollSpeed.y !== null){\n                    scrollContainer.scrollTop += Math.ceil(this.scrollSpeed.y / this.options.scrollSpeedDivider)\n                    this.areaStartY -= scrollContainer.scrollTop - scrollTop\n                }\n\n                if(this.scrollSpeed.x !== null){\n                    scrollContainer.scrollLeft += Math.ceil(this.scrollSpeed.x / this.options.scrollSpeedDivider)\n                    this.areaStartX -= scrollContainer.scrollLeft - scrollLeft\n                }\n\n                this.redrawArea()\n                this.updatedTouchingElements()\n                this.dispatchEvent('onMove', e)\n\n                requestAnimationFrame(scroll.bind(this))\n            }\n            requestAnimationFrame(scroll.bind(this))\n        } else {\n\n            this.redrawArea()\n            this.updatedTouchingElements()\n            this.dispatchEvent('onMove', e)\n        }\n    }\n    private manualScroll(e: WheelEvent){\n\n        if(this.scrollSpeed.x === null) this.scrollSpeed.x = 0\n        if(this.scrollSpeed.y === null) this.scrollSpeed.y = 0\n        this.scrollSpeed.x += this.options.scrollSpeedDivider * e.deltaX\n        this.scrollSpeed.y += this.options.scrollSpeedDivider * e.deltaY\n        this.onTapMove(\n            <TouchEvent>Object.assign(\n                e, \n                {\n                    changedTouches: new TouchList(),\n                    targetTouches: new TouchList(),\n                    touches:  new TouchList()\n                }\n            )\n        )\n        e.preventDefault()\n    }\n    private redrawArea(){\n        if(!this.targetContainer) return;\n        if(!this.targetBoundary) return;\n        const {\n            scrollHeight,\n            scrollWidth,\n            scrollLeft,\n            scrollTop,\n            clientHeight,\n            clientWidth,\n        } = this.targetContainer    \n\n        const boundaryRect = this.targetBoundary\n        let x = this.areaEndX, y = this.areaEndY\n\n        if(x < boundaryRect.left){\n            this.scrollSpeed.x = scrollLeft ? -Math.abs(boundaryRect.left - x) : null\n            x = boundaryRect.left\n        } else\n        if(x > boundaryRect.left + boundaryRect.width){\n            this.scrollSpeed.x = scrollWidth - scrollLeft - clientWidth ? Math.abs(boundaryRect.left + boundaryRect.width - x) : null\n            x = boundaryRect.left + boundaryRect.width\n        } else\n        if(true){\n            this.scrollSpeed.x = null\n        }\n        \n        if(y < boundaryRect.top){\n            this.scrollSpeed.y = scrollTop ? -Math.abs(boundaryRect.top - y) : null\n            y = boundaryRect.top\n        } else\n        if(y > boundaryRect.top + boundaryRect.height){\n            this.scrollSpeed.y = scrollHeight - scrollTop - clientHeight ? Math.abs(boundaryRect.top + boundaryRect.height - y) : null\n            y = boundaryRect.top + boundaryRect.height\n        } else\n        if(true){\n            this.scrollSpeed.y = null\n        }\n            \n        utils.css(\n            this.areaElement,\n            {\n                left: Math.min(this.areaStartX, x),\n                top: Math.min(this.areaStartY, y),\n                width: Math.max(this.areaStartX, x) - Math.min(this.areaStartX, x),\n                height: Math.max(this.areaStartY, y) - Math.min(this.areaStartY, y)\n            }\n        )\n    }\n    private preventDefault(e: Event){\n        e.preventDefault()\n    }\n    private onTapStop(e: TouchEvent | null, noEvent: boolean = false){\n\n        console.log('tabstop', utils)\n        utils.off(\n            document,\n            ['mousemove', 'touchmove'],\n            this.delayedTapMove\n        )\n        utils.off(\n            document,\n            ['mousemove', 'touchmove'],\n            this.onTapMove\n        )\n        utils.off(\n            document,\n            ['mouseup', 'touchcancel', 'touchend'],\n            this.onTapStop\n        )\n\n        if(this.singleClick && this.options.singleClick && e !== null){\n            this.onSingleTap(e)\n        } else\n        if(!this.singleClick && !noEvent && e !== null){\n            this.updatedTouchingElements()\n            this.dispatchEvent('onStop', e)\n        }\n        this.scrollSpeed = {x: null, y: null}\n\n        utils.off(window, 'wheel', this.manualScroll)\n\n        utils.off(document, 'selectstart', this.preventDefault)\n\n        utils.css(\n            this.areaElement,\n            'display',\n            'none'\n        )\n    }\n    private updatedTouchingElements(){\n        const touched = [], \n            changed: ChangedElements = {added: [], removed: []},\n            mode = this.options.mode,\n            selectables = this.selectables,\n            areaRect = this.areaElement.getBoundingClientRect(),\n            intersects = utils.intersects\n\n            for(let selectable of selectables){\n\n                if(intersects(areaRect, selectable.getBoundingClientRect(), mode)){\n                    if(this.dispatchFilterEvent('selectionFilter', selectable) !== false){\n\n                        if(!this.touchedElements.includes(selectable)){\n                            changed.added.push(selectable)\n                        }\n                        touched.push(selectable)\n                    }\n                }\n            }\n\n            for(let touchedElement of this.touchedElements){\n                if(!touched.includes(touchedElement)){\n                    changed.removed.push(touchedElement)\n                }\n            }\n        \n            this.touchedElements = touched\n            this.changedElements = changed\n    }\n    private dispatchFilterEvent(eventName: 'selectionFilter',  element: Element): boolean {\n    \n        const event = this.options[eventName]\n        if(typeof event === 'function'){\n\n            return event.call(this, {selection: this, eventName, element})\n        }\n        return false\n    }\n    \n    private dispatchEvent(eventName: keyof DispatchEventMap, originalEvent: Event, additional?: Object | {target: Element}){\n\n        \n        if(eventName === 'onSelect' &&\n            !(\n                additional && ('target' in additional)\n            )\n        ) {\n\n            throw TypeError(`target missing in \"${additional}\"`) ;\n        }\n        else {\n            if(eventName === 'onSelect'){\n                const event = this.options[eventName]\n        \n                if(typeof event === 'function' && additional && 'target' in additional){\n                    return event.call(\n                        this, \n                        {\n                            selection: this,\n                            eventName,\n                            areaElement: this.areaElement,\n                            originalEvent,\n                            selectedElements: this.touchedElements.concat(this.selectedStore),\n                            changedElements: this.changedElements,\n                            ...additional\n                        }\n                    )\n                } else throw Error(`event - options[\"${eventName}\"] is not callable`)\n            } else {\n\n                const event = this.options[eventName]\n        \n                if(typeof event === 'function'){\n                    return event.call(\n                        this, \n                        {\n                            selection: this,\n                            eventName,\n                            areaElement: this.areaElement,\n                            originalEvent,\n                            selectedElements: this.touchedElements.concat(this.selectedStore),\n                            changedElements: this.changedElements,\n                            ...additional\n                        }\n                    )\n                } else throw Error(`event - options[\"${eventName}\"] is not callable`)\n            }\n        }\n    }\n\n    public resolveSelectables(): void{\n        this.selectables = utils.selectAll(this.options.selectables)\n        const containers = utils.selectAll(this.options.containers)\n        for (let container of containers){\n            this.selectables.push(...container.querySelectorAll('*'))\n        }\n    }\n    public keepSelection(){\n        for(let touchedElement of this.touchedElements){\n            if(!this.selectedStore.includes(touchedElement)){\n                this.selectedStore.push(touchedElement)\n            }\n        }\n    }\n    public clearSelection(){\n        this.selectedStore = []\n    }\n    public removeFromSelection(element: Element){\n        utils.removeElement(this.selectedStore, element)\n        utils.removeElement(this.touchedElements, element)\n    }\n    public get Selection(){\n\n        return this.selectedStore\n    }\n    public cancel(keepEvent = false){\n        this.onTapStop(null, !keepEvent)\n    }\n    public option(name: keyof Options, value?: any) {\n        const {options} = this\n        return value == null ? options[name] : (options[name] = value)\n    }\n    public disable(){\n        this.bindStartEvents('off')\n    }\n    public destroy(){\n        this.disable()\n        if(typeof this.selectionAreaContainer !== 'string')\n        this.selectionAreaContainer.removeChild(this.clippingElement)\n        else throw TypeError(`this.selecionAreaContainer has to be of type Element but is of type string`)\n    }\n    public enable(){\n        this.bindStartEvents('on')\n    }\n    public static create(options?: Options){\n        return new Selection(options)\n    }\n\n    public utils: Utils = utils\n    public readonly version: string = '0.2.2'\n\n    \n}\nexport function create(options?: Options){\n    return new Selection(options)\n}\nexport default Selection"],"sourceRoot":""}