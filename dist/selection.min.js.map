{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./src/utils.ts","webpack:///./src/selection.ts"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","eventListener","method","elements","events","fn","elements_","options","arguments","length","undefined","HTMLCollection","NodeList","Array","from","isArray","element","event","assign","capture","slice","on","off","unitify","val","unit","css","el","attr","style","prop","cssStyleDeclaration","dw","document","defaultView","getComputedStyle","intersects","a","b","bxc","left","width","byc","top","height","right","bottom","selectAll","selector","nodes","sel","push","querySelectorAll","eventPath","evt","path","composedPath","target","parentElement","removeElement","arr","index","indexOf","splice","simplifyEvent","tap","touches","x","clientX","y","clientY","isElement","HTMLElement","nodeType","nodeName","__webpack_exports__","selection_Selection","[object Object]","this","class","startThreshold","disableTouch","singleClick","containers","selectables","startareas","boundaries","selectionAreaContainer","scrollSpeedDivider","validateStart","selection","eventName","areaElement","originalEvent","selectedElements","changedElements","selectionFilter","selectedStore","createElement","clippingElement","scrollAvailable","scrollSpeed","areaStartX","areaStartY","areaEndX","areaEndY","touchedElements","utils","utils_namespaceObject","version","init","querySelector","appendChild","position","overflow","transform","pointerEvents","enable","type","onTapStart","passive","e","_this$utils$simplifyE","targetBondaryClientRect","getBoundingClientRect","startAreas","evtpath","find","includes","resolveSelectables","targetContainer","targetBoundary","added","removed","Math","round","scrollHeight","scrollWidth","manualScroll","filter","contains","_this$targetBoundary","marginTop","marginLeft","classList","add","delayedTapMove","onTapStop","preventDefault","dispatchEvent","_this$utils$simplifyE3","abs","onTapMove","_this$utils$simplifyE4","redrawArea","updatedTouchingElements","scrollContainer","scroll","scrollTop","scrollLeft","ceil","requestAnimationFrame","deltaX","deltaY","changedTouches","TouchList","targetTouches","_this$targetContainer","clientHeight","clientWidth","boundaryRect","min","max","noEvent","onSingleTap","touched","changed","areaRect","selectable","dispatchFilterEvent","touchedElement","additional","concat","container","Selection","keepEvent","bindStartEvents","disable","removeChild"],"mappings":"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","file":"selection.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Selection\"] = factory();\n\telse\n\t\troot[\"Selection\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import { Mode, CSSWriteableStyleDeclarationProperties, Subtype } from \"./types\";\r\n\r\nfunction eventListener(method: \"addEventListener\" | \"removeEventListener\", elements: HTMLCollection | NodeList | Element, events: (keyof GlobalEventHandlersEventMap)[] | keyof GlobalEventHandlersEventMap, fn: EventListener, options: Object = {}) {\r\n\r\n    let elements_: Iterable<Subtype<Node, Function>>\r\n    // Normalize array\r\n    if (elements instanceof HTMLCollection || elements instanceof NodeList) {\r\n        elements_ = Array.from(<HTMLCollection | NodeList>elements);\r\n    } else if (!Array.isArray(elements)) {\r\n        elements_ = [elements];\r\n    }\r\n\r\n    if (!Array.isArray(events)) events = [events];\r\n\r\n    for (const element of elements_) {\r\n        for (const event of events) {\r\n            element[method](event, fn, {capture: false, ...options});\r\n        }\r\n    }\r\n\r\n    return Array.prototype.slice.call(arguments, 1);\r\n}\r\n\r\n/**\r\n * Add event(s) to element(s).\r\n * @param elements DOM-Elements\r\n * @param events Event names\r\n * @param fn Callback\r\n * @param options Optional options\r\n * @return Array passed arguments\r\n */\r\nexport const on = eventListener.bind(null, 'addEventListener');\r\n\r\n/**\r\n * Remove event(s) from element(s).\r\n * @param elements DOM-Elements\r\n * @param events Event names\r\n * @param fn Callback\r\n * @param options Optional options\r\n * @return Array passed arguments\r\n */\r\nexport const off = eventListener.bind(null, 'removeEventListener');\r\n\r\nconst unitify = (val: string | number, unit = 'px') => typeof val === 'number' ? val + unit : '' + val;\r\n\r\n/**\r\n * Add css to a DOM-Element or returns the current\r\n * value of a property.\r\n *\r\n * @param el The Element.\r\n * @param attr The attribute or a object which holds css key-properties.\r\n * @param val The value for a single attribute.\r\n * @returns {*}\r\n */\r\nexport function css(el: HTMLElement, attr: {[key in CSSWriteableStyleDeclarationProperties]?: string | number } | CSSWriteableStyleDeclarationProperties | null, val: number | string = null) {\r\n\r\n    // what the heck is this function \r\n\r\n    const style = el && el.style;\r\n    if (!style) return; //undefined\r\n\r\n    if (typeof attr === 'object') {\r\n\r\n        for (let prop in attr) {\r\n            style[<CSSWriteableStyleDeclarationProperties>prop] = unitify(attr[<CSSWriteableStyleDeclarationProperties>prop]);\r\n        }\r\n        // undefined\r\n    } else if (val == null) {\r\n\r\n        let cssStyleDeclaration: CSSStyleDeclaration\r\n        const dw = document.defaultView;\r\n        if (dw && dw.getComputedStyle) {\r\n            cssStyleDeclaration = dw.getComputedStyle(el, null);\r\n        } \r\n        // IE6 - deprecated as outdated and unsecure - no need to support\r\n        // else if (el.currentStyle) {\r\n        //     val = el.currentStyle;\r\n        // }\r\n\r\n        return attr == null ? cssStyleDeclaration : cssStyleDeclaration[attr]; // CSSStyleDeclaration | string | number\r\n    } else {\r\n        style[attr] = unitify(val);\r\n        // undefined\r\n    }\r\n}\r\n\r\n/**\r\n * Check if two DOM-Elements intersects each other.\r\n * @param a BoundingClientRect of the first element.\r\n * @param b BoundingClientRect of the second element.\r\n * @param mode Options are center, cover or touch.\r\n * @returns {boolean} If both elements intersects each other.\r\n */\r\nexport function intersects(a: ClientRect | DOMRect, b: ClientRect | DOMRect, mode: Mode = 'touch') {\r\n\r\n    if (mode === 'center') {\r\n        const bxc = b.left + b.width / 2;\r\n        const byc = b.top + b.height / 2;\r\n\r\n        return bxc >= a.left\r\n            && bxc <= a.right\r\n            && byc >= a.top\r\n            && byc <= a.bottom;\r\n    } else if (mode === 'cover') {\r\n        return b.left >= a.left\r\n            && b.top >= a.top\r\n            && b.right <= a.right\r\n            && b.bottom <= a.bottom;\r\n    } else if (mode === 'touch') {\r\n        return a.right >= b.left\r\n            && a.left <= b.right\r\n            && a.bottom >= b.top\r\n            && a.top <= b.bottom;\r\n    }\r\n}\r\n\r\n/**\r\n * Takes a selector (or array of selectors) and returns the matched nodes.\r\n * @param selector The selector or an Array of selectors.\r\n * @returns {Array} Array of DOM-Nodes.\r\n */\r\nexport function selectAll(selector: string | Array<string>) {\r\n    if (!Array.isArray(selector)) selector = [selector];\r\n\r\n    const nodes: Array<Element> = [];\r\n    for (const sel of selector) {\r\n        nodes.push(...document.querySelectorAll(sel));\r\n    }\r\n\r\n    return nodes;\r\n}\r\n\r\n/**\r\n * Polyfill for safari & firefox for the eventPath event property.\r\n * @param evt The event object.\r\n * @return [String] event path.\r\n */\r\nexport function eventPath(evt: Event) {\r\n    let path = /** evt.path  || */ (evt.composedPath && evt.composedPath()); // again ignore M$\r\n    if (path) return path;\r\n\r\n    // polyfill\r\n    let el = (<Element>evt.target).parentElement\r\n    path = [evt.target, el];\r\n    while (el = el.parentElement) path.push(el);\r\n\r\n    path.push(document, window);\r\n    return path;\r\n}\r\n\r\n/**\r\n * Removes first instance of element from an Array by reference.\r\n */\r\nexport function removeElement(arr: Array<any>, el: Element) {\r\n    const index = arr.indexOf(el);\r\n    if (~index) arr.splice(index, 1);\r\n}\r\n\r\n\r\nexport function simplifyEvent(evt: MouseEvent | TouchEvent) {\r\n    const tap = ((<TouchEvent>evt).touches && (<TouchEvent>evt).touches[0]) || <MouseEvent>evt;\r\n    return {\r\n        tap,\r\n        x: tap.clientX,   \r\n        y: tap.clientY,\r\n        target: <Element>tap.target\r\n    };\r\n}\r\n\r\n/**\r\n * Checks if value is likely a DOM element.\r\n */\r\nexport function isElement(value: any) {\r\n    return (\r\n        typeof HTMLElement === \"object\"\r\n            ? value instanceof HTMLElement\r\n            : typeof value === \"object\" && value !== null && value.nodeType === 1 && typeof value.nodeName === \"string\"\r\n    );\r\n}","/**\r\n * Selection, library to realize visual DOM-Selection like on your Desktop.\r\n *\r\n * @author  Simon Reinisch - TypeScripted: Samuel Ueberle\r\n * @license MIT\r\n */\r\nimport {Options, Utils, ChangedElements} from './types'\r\nimport * as utils from './utils'\r\n\r\n\r\nexport class Selection {\r\n\r\n    constructor(options: Options){\r\n        if(options)\r\n        Object.assign(this.options, options)\r\n        this.init()\r\n    }\r\n\r\n    private options: Options = {\r\n        class: 'selection-area',\r\n        startThreshold: 10,\r\n        disableTouch: false,\r\n        mode: 'touch',\r\n        singleClick: true,\r\n        containers: [],\r\n        selectables: [],\r\n        startareas: ['html'],\r\n        boundaries: ['html'],\r\n        selectionAreaContainer: 'body',\r\n        scrollSpeedDivider: 10,\r\n        validateStart(evt) {\r\n            evt; // MouseEvent or TouchEvent\r\n            return true;\r\n        },\r\n        onStart(evt) {\r\n            evt.selection;\r\n            evt.eventName;\r\n            evt.areaElement;\r\n            evt.originalEvent;\r\n            evt.selectedElements;\r\n            evt.changedElements;\r\n        },\r\n        onSelect(evt) {\r\n        evt.target; // Clicked element\r\n        },\r\n        onMove(evt) {\r\n        },\r\n        onStop(evt) {\r\n        },\r\n        selectionFilter(evt) {\r\n            evt.selection; // This selection instance\r\n            evt.eventName; // The event name\r\n            evt.element;   // The element which is in the current selection\r\n            return true\r\n        }\r\n    }\r\n    private selectedStore: any[]\r\n    = []\r\n    private areaElement: HTMLDivElement\r\n    = document.createElement('div')\r\n    private clippingElement: HTMLDivElement \r\n    = document.createElement('div')\r\n    private scrollAvailable: boolean \r\n    = true\r\n    private scrollSpeed: {x: number, y: number} \r\n    = {x: null, y: null}\r\n    private selectionAreaContainer: Element = null\r\n    private areaStartX: number = 0\r\n    private areaStartY: number = 0\r\n    private areaEndX: number = 0\r\n    private areaEndY: number = 0\r\n    private boundaries: Element[] = []\r\n    private touchedElements: Element[] = []\r\n    private targetBoundary:  ClientRect | DOMRect\r\n    private targetContainer: Element\r\n    private selectables: Element[]\r\n    private singleClick: boolean = false\r\n    private changedElements: ChangedElements\r\n\r\n    private init() {\r\n\r\n        // Append area to container\r\n        if (this.utils.isElement(this.options.selectionAreaContainer)) {\r\n            this.selectionAreaContainer = <Element>this.options.selectionAreaContainer;\r\n        } else {\r\n            this.selectionAreaContainer = document.querySelector(<string>this.options.selectionAreaContainer);\r\n        }\r\n\r\n        this.clippingElement.appendChild(this.areaElement);\r\n        this.selectionAreaContainer.appendChild(this.clippingElement);\r\n\r\n        // Apply basic styles to the area element\r\n        this.utils.css(\r\n            this.areaElement, \r\n            {\r\n                top: 0,\r\n                left: 0,\r\n                position: 'fixed'\r\n            }\r\n        );\r\n\r\n        this.utils.css(\r\n            this.clippingElement,\r\n            {\r\n                overflow: 'hidden',\r\n                position: 'fixed',\r\n                transform: 'translate3d(0, 0, 0)', // https://stackoverflow.com/a/38268846\r\n                pointerEvents: 'none'\r\n            }\r\n        );\r\n\r\n        this.enable();\r\n    }\r\n\r\n    private bindStartEvents(type: keyof Utils){\r\n        this.utils[type]\r\n        (document, 'mousedown', this.onTapStart)\r\n        if(!this.options.disableTouch){\r\n            this.utils[type]\r\n            (document, 'touchstart', this.onTapStart, {passive: false})\r\n        }\r\n    }\r\n    private onTapStart(e: TouchEvent): undefined{\r\n        const {x, y, target} = this.utils.simplifyEvent(e)\r\n        const targetBondaryClientRect = target.getBoundingClientRect()\r\n\r\n        if(this.options.validateStart(e)){\r\n            return undefined;\r\n        }\r\n\r\n        const startAreas = this.utils.selectAll(this.options.startareas)\r\n        this.boundaries = this.utils.selectAll(this.options.boundaries)\r\n\r\n        const evtpath = this.utils.eventPath(e)\r\n        if(\r\n            !startAreas.find(el => evtpath.includes(el)) ||\r\n            !this.boundaries.find(el => evtpath.includes(el))\r\n        ) return undefined;\r\n\r\n        this.areaStartX = x;\r\n        this.areaStartY = y;\r\n\r\n        this.areaEndX = 0;\r\n        this.areaEndY = 0;\r\n\r\n        this.singleClick = true\r\n\r\n        this.resolveSelectables()\r\n\r\n        this.targetContainer = this.boundaries.find(\r\n            el => this.utils.intersects(\r\n                el.getBoundingClientRect(),\r\n                targetBondaryClientRect\r\n            )\r\n        )\r\n\r\n        this.targetBoundary = this.targetContainer.getBoundingClientRect()\r\n        this.touchedElements = []\r\n        this.changedElements = {\r\n            added: [],\r\n            removed: []\r\n        }\r\n\r\n        if(\r\n            Math.round(\r\n                this.targetContainer.scrollHeight\r\n            ) \r\n            !== Math.round(\r\n                this.targetBoundary.height\r\n            ) ||\r\n            Math.round(\r\n                this.targetContainer.scrollWidth\r\n            )\r\n            !== Math.round(\r\n                this.targetBoundary.width\r\n            )\r\n        ) {\r\n            this.scrollAvailable = true\r\n\r\n            this.utils.on(window, 'wheel', this.manualScroll)\r\n            this.selectables = this.selectables.filter(s => this.targetContainer.contains(s))\r\n\r\n            let {top, left, width, height} = this.targetBoundary\r\n            this.utils.css(\r\n                this.clippingElement, {\r\n                    \"top\": top, \r\n                    left, width, height\r\n                }\r\n            )\r\n\r\n            this.utils.css(\r\n                this.areaElement, {\r\n                    marginTop: -top,\r\n                    marginLeft: -left\r\n                }\r\n            )\r\n        } else {\r\n            this.scrollAvailable = false\r\n\r\n            this.utils.css(\r\n                this.clippingElement,\r\n                {\r\n                    top: 0,\r\n                    left: 0,\r\n                    width: '100%',\r\n                    height: '100%'\r\n                }\r\n            )\r\n            this.utils.css(\r\n                this.areaElement, {\r\n                    marginTop: 0,\r\n                    marginLeft: 0\r\n                }\r\n            )\r\n        }\r\n\r\n        this.areaElement.classList.add(this.options.class);\r\n\r\n        this.utils.on(document, 'mousemove', this.delayedTapMove)\r\n        this.utils.on(document, 'touchmove', this.delayedTapMove, {\r\n            passive: false\r\n        })\r\n\r\n        this.utils.on(document, ['mouseup', 'touchcancel', 'touchend'], this.onTapStop)\r\n\r\n        e.preventDefault()\r\n    }\r\n    private onSingleTap(e: TouchEvent): void{\r\n        let {target} = this.utils.simplifyEvent(e)\r\n\r\n        while(this.selectables.includes(target)){\r\n            if(target.parentElement){\r\n                target = target.parentElement\r\n            } else {\r\n                return undefined;\r\n            }\r\n        }\r\n\r\n        this.touchedElements.push(target);\r\n        this.dispatchEvent('onSelect', e, {target})\r\n    }\r\n    private delayedTapMove(e: TouchEvent){\r\n        let {x , y} = this.utils.simplifyEvent(e)\r\n\r\n        if(Math.abs(x + y) - (this.areaStartX + this.areaStartY) >= this.options.startThreshold){\r\n\r\n            this.utils.off(document, ['mousemove', 'touchmove'], this.delayedTapMove)\r\n            this.utils.on(document, ['mousemove', 'touchmove'], this.onTapMove)\r\n            this.utils.css(\r\n                this.areaElement,\r\n                'display',\r\n                'block'\r\n            )\r\n            this.onTapMove(e)\r\n            this.dispatchEvent('onStart', e)\r\n            this.singleClick = false\r\n        }\r\n    }\r\n    private onTapMove(e: TouchEvent){\r\n        let {x , y} = this.utils.simplifyEvent(e)\r\n        this.areaEndX = x;\r\n        this.areaEndY = y;\r\n        \r\n        if(this.scrollAvailable && (this.scrollSpeed.y !== null || this.scrollSpeed.x !== null)){\r\n            const scrollContainer = this.targetContainer\r\n            \r\n            let scroll = (t: number):void => {\r\n        \r\n                if(this.scrollSpeed.y === null && this.scrollSpeed.x === null){\r\n        \r\n                    return undefined;\r\n                }\r\n        \r\n                const {scrollTop, scrollLeft} = scrollContainer\r\n                if(this.scrollSpeed.y !== null){\r\n                    scrollContainer.scrollLeft += Math.ceil(this.scrollSpeed.y / this.options.scrollSpeedDivider)\r\n                    this.areaStartY -= scrollContainer.scrollTop - scrollTop\r\n                }\r\n\r\n                if(this.scrollSpeed.x !== null){\r\n                    scrollContainer.scrollLeft += Math.ceil(this.scrollSpeed.x / this.options.scrollSpeedDivider)\r\n                    this.areaStartX -= scrollContainer.scrollLeft - scrollLeft\r\n                }\r\n\r\n                this.redrawArea()\r\n                this.updatedTouchingElements()\r\n                this.dispatchEvent('onMove', e)\r\n\r\n                requestAnimationFrame(scroll)\r\n            }\r\n            requestAnimationFrame(scroll)\r\n        } else {\r\n\r\n            this.redrawArea()\r\n            this.updatedTouchingElements()\r\n            this.dispatchEvent('onMove', e)\r\n        }\r\n    }\r\n    private manualScroll(e: WheelEvent){\r\n\r\n        this.scrollSpeed.x += this.options.scrollSpeedDivider * e.deltaX\r\n        this.scrollSpeed.y += this.options.scrollSpeedDivider * e.deltaY\r\n        this.onTapMove(\r\n            <TouchEvent>Object.assign(\r\n                e, \r\n                {\r\n                    changedTouches: new TouchList(),\r\n                    targetTouches: new TouchList(),\r\n                    touches:  new TouchList()\r\n                }\r\n            )\r\n        )\r\n        e.preventDefault()\r\n    }\r\n    private redrawArea(){\r\n        const {\r\n            scrollHeight,\r\n            scrollWidth,\r\n            scrollLeft,\r\n            scrollTop,\r\n            clientHeight,\r\n            clientWidth,\r\n        } = this.targetContainer    \r\n\r\n        const boundaryRect = this.targetBoundary\r\n        let x = this.areaEndX, y = this.areaEndY\r\n\r\n        if(x < boundaryRect.left){\r\n            this.scrollSpeed.x = scrollLeft ? -Math.abs(boundaryRect.left - x) : null\r\n            x = boundaryRect.left\r\n        } else\r\n        if(x > boundaryRect.left + boundaryRect.width){\r\n            this.scrollSpeed.x = scrollWidth - scrollLeft - clientWidth ? -Math.abs(boundaryRect.left + boundaryRect.width - x) : null\r\n            x = boundaryRect.left + boundaryRect.width\r\n        } else\r\n        if(true){\r\n            this.scrollSpeed.x = null\r\n        }\r\n        \r\n        if(y < boundaryRect.top){\r\n            this.scrollSpeed.y = scrollTop ? -Math.abs(boundaryRect.top - y) : null\r\n            y = boundaryRect.top\r\n        } else\r\n        if(y > boundaryRect.top + boundaryRect.height){\r\n            this.scrollSpeed.y = scrollHeight - scrollTop - clientHeight ? -Math.abs(boundaryRect.top + boundaryRect.height - y) : null\r\n            y = boundaryRect.top + boundaryRect.height\r\n        } else\r\n        if(true){\r\n            this.scrollSpeed.y = null\r\n        }\r\n            \r\n        this.utils.css(\r\n            this.areaElement,\r\n            {\r\n                top: Math.min(this.areaStartX, x),\r\n                left: Math.min(this.areaStartY, y),\r\n                width: Math.max(this.areaStartX, x),\r\n                height: Math.max(this.areaStartY, y)\r\n            }\r\n        )\r\n    }\r\n    private preventDefault(e: Event){\r\n        e.preventDefault()\r\n    }\r\n    private onTapStop(e: TouchEvent, noEvent: boolean){\r\n\r\n        this.utils.off(\r\n            document,\r\n            ['mousemove', 'touchmove'],\r\n            this.delayedTapMove\r\n        )\r\n        this.utils.off(\r\n            document,\r\n            ['mousemove', 'touchmove'],\r\n            this.onTapMove\r\n        )\r\n        this.utils.off(\r\n            document,\r\n            ['mouseup', 'touchcancel', 'touchend'],\r\n            this.onTapStop\r\n        )\r\n\r\n        if(this.singleClick && this.options.singleClick){\r\n            this.onSingleTap(e)\r\n        } else\r\n        if(!this.singleClick && !noEvent){\r\n            this.updatedTouchingElements()\r\n            this.dispatchEvent('onStop', e)\r\n        }\r\n        this.scrollSpeed = {x: null, y: null}\r\n\r\n        this.utils.off(window, 'wheel', this.manualScroll)\r\n\r\n        this.utils.off(document, 'selectstart', this.preventDefault(e))\r\n\r\n        this.utils.css(\r\n            this.areaElement,\r\n            'display',\r\n            'none'\r\n        )\r\n    }\r\n    private updatedTouchingElements(){\r\n        const touched = [], \r\n            changed: ChangedElements = {added: [], removed: []},\r\n            mode = this.options.mode,\r\n            selectables = this.selectables,\r\n            areaRect = this.areaElement.getBoundingClientRect(),\r\n            intersects = this.utils.intersects\r\n\r\n            for(let selectable of selectables){\r\n\r\n                if(intersects(areaRect, selectable.getBoundingClientRect(), mode)){\r\n                    if(this.dispatchFilterEvent('selectionFilter', selectable) !== false){\r\n\r\n                        if(!this.touchedElements.includes(selectable)){\r\n                            changed.added.push(selectable)\r\n                        }\r\n                        touched.push(selectable)\r\n                    }\r\n                }\r\n            }\r\n\r\n            for(let touchedElement of this.touchedElements){\r\n                if(!touched.includes(touchedElement)){\r\n                    changed.removed.push(touchedElement)\r\n                }\r\n            }\r\n        \r\n            this.touchedElements = touched\r\n            this.changedElements = changed\r\n    }\r\n    private dispatchFilterEvent(eventName: keyof Options, element: Element): boolean {\r\n    \r\n        const event = this.options[eventName]\r\n        if(typeof event === 'function'){\r\n\r\n            return event.call(this, {selection: this, eventName, element})\r\n        }\r\n    }\r\n    private dispatchEvent(eventName: keyof Options, originalEvent: Event, additional?: Object){\r\n        const event = this.options[eventName]\r\n\r\n        if(typeof event === 'function'){\r\n            return event.call(\r\n                this, \r\n                {\r\n                    selection: this,\r\n                    eventName,\r\n                    areaElement: this.areaElement,\r\n                    originalEvent,\r\n                    selectedElements: this.touchedElements.concat(this.selectedStore),\r\n                    changedElements: this.changedElements,\r\n                    ...additional\r\n                }\r\n            )\r\n        }\r\n    }\r\n\r\n    public resolveSelectables(): void{\r\n        this.selectables = this.utils.selectAll(this.options.selectables)\r\n        const containers = this.utils.selectAll(this.options.containers)\r\n        for (let container of containers){\r\n            this.selectables.push(...container.querySelectorAll('*'))\r\n        }\r\n    }\r\n    public keepSelection(){\r\n        for(let touchedElement of this.touchedElements){\r\n            if(!this.selectedStore.includes(touchedElement)){\r\n                this.selectedStore.push(touchedElement)\r\n            }\r\n        }\r\n    }\r\n    public clearSelection(){\r\n        this.selectedStore = []\r\n    }\r\n    public removeFromSelection(element: Element){\r\n        this.utils.removeElement(this.selectedStore, element)\r\n        this.utils.removeElement(this.touchedElements, element)\r\n    }\r\n    public get Selection(){\r\n\r\n        return this.selectedStore\r\n    }\r\n    public cancel(keepEvent = false){\r\n        this.onTapStop(null, !keepEvent)\r\n    }\r\n    public option(name: keyof Options, value?: any) {\r\n        const {options} = this\r\n        return value == null ? options[name] : (options[name] = value)\r\n    }\r\n    public disable(){\r\n        this.bindStartEvents('off')\r\n    }\r\n    public destroy(){\r\n        this.disable()\r\n        this.selectionAreaContainer.removeChild(this.clippingElement)\r\n    }\r\n    public enable(){\r\n        this.bindStartEvents('on')\r\n    }\r\n\r\n    public utils: Utils = {...utils}\r\n    public readonly version: string = '0.2.2'\r\n}\r\nexport function create(options?: Options){\r\n    return new Selection(options)\r\n}\r\nexport default Selection"],"sourceRoot":""}